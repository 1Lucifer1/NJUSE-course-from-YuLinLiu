# 需求获取

## 概述

### 获取过程

+ 研究应用背景，建立初始的知识框架；
+ 根据获取的需要，采用必要的获取方法和技巧；

  + 先行确定获取的内容和主题，设定场景；

  + 分析用户的高（深）层目标，理解用户的意图；
+ 进行涉众分析，针对涉众的特点开展工作。

![image-20210113234839306](assets/image-20210113234839306.png)

### 要点

#### 来源

![image-20210113211602579](assets/image-20210113211602579.png)

#### 方法

![image-20210113211619117](assets/image-20210113211619117.png)

#### 结果

![image-20210113211651030](assets/image-20210113211651030.png)

## 面谈

### 问题类型

#### 开放式问题

+ 被会见者对答复的选择可以是开放和不受限制的，他们可能答复两个词，也可能答复两段话。
+ 在希望得到丰富（具有一定深度和广度）信息时，开放式问题比较合适
+ Ex. “你觉得把所有的经理都置于一个内联网内怎么样？”

#### 封闭式问题

+ 答案有基本的形式，被会见者的回答是受到限制的
+ Ex. “下列信息中哪个对你最有用：（1）填好的客户投诉单；（2）访问web站点的客户的电子邮件投诉；（3）与客户面对面的交流；（4）退回的货物。”

### 问题准备

#### 前期

+ 开放式问题为主

+ 决策层与专家为主

+ 遵循 问题->目标->解决方案路线
  + 问题、目标
  + 目标、任务（流程->任务）

+ 分析基本的涉众特点
  + 角色、任务、个人目标、频率、优先级

#### 后期

+ 封闭式问题为主
+ 抓住主题与线索
  + 例如，任务分解、流程图、界面示意…

+ 问题针对性
  + 任务分解关系
  + 流程正确性、异常
  + 界面中的行为、数据项

+ 事先准备面谈记录材料


## 确定项目前景和范围

###  用途

![image-20210113213226386](assets/image-20210113213226386.png)

### 问题分析

#### 流程

![image-20210113213338691](assets/image-20210113213338691.png)

#### 获取问题

+ 通过收集背景资料或者与涉众沟通来实现

+ 收集背景资料时要收集业务描述及其统计数据关注业务困难与问题。与涉众的沟通主要通过面谈

P1：手工作业销售迟缓，效率不高。

P2：商店的商品品种太多，无法准确掌握库存。

P3：成本不够低，导致竞争力不强，盈利水平不够。

P4：顾客不够多，销售额不高，盈利水平不够。

#### 明确问题

##### 对问题达成共识

+ 描述问题并在涉众之间取得认同

![image-20210113213602033](assets/image-20210113213602033.png)

##### 判断问题的明确性

+ 问题的明确性要求它们具备一下两点：
  + 易于理解；
    + *P1. 图书管理员：图书总是无法上架。*
    + *P2. 图书管理员：图书的内容分类不合适，无法分类上架图书上架的工作太繁杂，导致来不及上架。图书的借阅不遵守章程，不能保证上架。*
+ 能指明解决的方向
    + *P3. 决策者：生产的废品过多。* 

##### 现问题背后的问题

+ 对于不明确的问题
  + 直接咨询涉众是第一选择
  + 利用收集的资料和业务数据是第二选择
    + 需要使用一些问题分析技巧与工具（画布）
    + 分析竞品、数据驱动运营等
      + “如果不确定该怎么做，就先学别人是怎么做的”

#### 发现业务需求

+ 每一个明确、一致的问题都意味着涉众存在一些相应的期望目标，即业务需求。

+ 一般情况下，业务需求就是问题的反面
  + *P3. 决策者：生产的废品过多*
  + *BR2：提供销售订单的准确性，在系统使用后3个月内，减少50%因此而产生的废品。*

+ **注意：业务目标要具有第二章所述的各种优秀特性，尤其是要有可验证性**

#### 定义解决方案及系统特性

##### 确定高层次的解决方案

+ 发现各种可行的高层次解决方案，分析不同方案的业务优势和代价，然后通过和涉众的协商，选定其中一个

![image-20210113214148327](assets/image-20210113214148327.png)

##### 确定系统特性和解决方案的边界

+ 明确该解决方案需要具备的功能特征，即系统特性

+ 特性是对一系列内聚的相互联系的需求（*要求*）、领域特征和规格的总称[Classen2008]。通常，一个特性内聚于一个目标与任务，反映了系统与外界一次有价值的完整互动过程（一组**任务的要求**）
+ 分析解决方案需要和周围环境形成的交互作用，定义解决方案的边界
+ 解决方案边界：用例图、上下文图

![image-20210113214421609](assets/image-20210113214421609.png)

![image-20210113214429738](assets/image-20210113214429738.png)

##### 确定解决方案的约束

![image-20210113214501627](assets/image-20210113214501627.png)

### 问题分析案例

#### 描述

×××连锁商店是一家刚刚发展起来的小型连锁商店，其前身是一家独立的小百货门面店。原商店只有销售的收银部分使用软件处理，其他业务都是手工作业，这已经不能适应它的业务发展要求。首先是随着商店规模的扩大，顾客量大幅增长，手工作业销售迟缓，顾客购物排队现象严重，导致流失客源。其次是商店的商品品种增多，无法准确掌握库存，商品积压、缺货和报废的现象上升明显。再次是商店面临的竞争比以前更大，希望在降低成本，吸引顾客，增强竞争力的同时，保持盈利水平。

#### 问题

P1：手工作业销售迟缓，效率不高。

P2：商店的商品品种太多，无法准确掌握库存。

P3：成本不够低，导致竞争力不强，盈利水平不够。

P4：顾客不够多，销售额不高，盈利水平不够。

##### 格式化

![image-20210113214648271](assets/image-20210113214648271.png)

#### 业务需求

![image-20210113214732874](assets/image-20210113214732874.png)

#### 解决方案

![image-20210113214759018](assets/image-20210113214759018.png)

#### 系统特性

![image-20210113214846948](assets/image-20210113214846948.png)

#### 边界

![image-20210113214959714](assets/image-20210113214959714.png)

### 目标分析

#### 目标

+ 目标：是系统被开发的目的 
  + 它有着明确的定义方式 
  + 名称、类型、关注、定义（正式与非正式））、优先级、主体、拥有者等

![image-20210113215210520](assets/image-20210113215210520.png)

#### 分类

+ 高层次目标
  + 战略性的,全局的, 业务相关的
  + “增加50% 的传输能力”

+ 低层次目标
  + 技术性的，局部的，产品设计相关的
  + “加速器每3秒发出一次命令”

#### 基本模式

+ 实现（Achieve）：P ⇒ ◊ Q  //如果将来某一时刻Q为真（被满足），则目标实现

+ 终止（Cease）： P ⇒ ◊ ¬ Q //如果将来某一时刻Q为假（被终止），则目标实现

+ 保持（Maintain）： P ⇒ □Q //将来任一时刻Q都为真，则目标实现

+ 避免（Avoid）： P ⇒ □¬ Q //将来任一时刻Q都为假，则目标实现

+ 优化（Optimize）：最大化Maximize (目标功能) 或 最小化Minimize (目标功能)

#### 目标精化

+ 一个高层次目标G可以精化为低层次目标{G1,G2,…,Gn}：
+ 如果一系列子目标{G1,G2,…,Gn}的完成有助于目标G的完成，那么G与{G1,G2,…,Gn}之间就是AND 精化关系。此时任意两子目标Gi与Gj之间是互补的。
+ 如果任一子目标Gi都是G的替代方案，那么G与{G1,G2,…,Gn}之间就是OR 精化关系。此时，任意两子目标Gi与Gj之间是互相替代的。

![image-20210113231338678](assets/image-20210113231338678.png)

#### 目标阻碍

+ 如果子目标O的达成会使得高层目标G失败O**|=**¬G，那么O与G的关系就是阻碍关系

+ 阻碍目标也可以继续AND精化、OR精化

+ 阻碍关系本身是一种特殊的精化——反向精化

![image-20210113231413283](assets/image-20210113231413283.png)

#### 目标支持与冲突

+ Support链接表示一个目标对其他目标的支持作用
  + 支持关系可以被处理为OR精化关系

+ Conflict链接表示一个目标的实现对其他目标的实现有阻碍作用

![image-20210113231728371](assets/image-20210113231728371.png)

#### 目标主体

+ Assignment链接表示为实现目标而需要参与主体。
  + OR Assignment：多个主体中的一个来完成。
  + AND Assignment：多个主体一起共同完成

![image-20210113231845341](assets/image-20210113231845341.png)

#### 目标操作

+ AND Operationalization链接和OR Operationalization链接
  + 目标实现过程中需要执行的操作，G |= {Spec(Op1), ..., Spec(Opn)}

![image-20210113231926160](assets/image-20210113231926160.png)

#### 目标场景

+ Cover链接表示场景涉及所有行为都是目标所包含的操作的子集

![image-20210113231953774](assets/image-20210113231953774.png)

#### 目标数据

+ Concerns链接用来描述目标与应用领域对象（数据资源）之间的关系

![image-20210113232027430](assets/image-20210113232027430.png)

#### 过程

![image-20210113232044723](assets/image-20210113232044723.png)

##### 高层目标的获取

+ 现状和背景的分析：问题与缺陷

##### 低层目标的获取

+ 需求获取与目标分析

+ 已有目标的验证和细化 （基于目标分析）

+ 基于场景的方法等等 （基于目标实现）

##### 目标分析 

+ 精化与分解

+ 建立系统的目标模型 

##### 目标实现 

+ 收集与目标相关的需求信息，讨论可能的候选解决方案，确定最终的系统详细需求和解决方案

### 非功能性需求

#### 将非功能需求建模为目标

+ 在早期信息较为抽象和不充分时建模为软目标，后期添加目标满足标准修正为硬目标，这样符合需求开发的基本过程。
+ 让非功能目标支持、阻碍或精化功能目标，描述非功能需求对功能需求的依赖关系。
+ 让单个非功能目标依赖多个不同的功能目标，描述非功能需求的散布特性。
+ 使用支持、阻碍（冲突）精化描述不同非功能目标之间的折中与冲突关系。
+ 依赖质量模型，高层非功能目标精化为子非功能目标，描述非功能需求的层次结构关系

![image-20210113232900872](assets/image-20210113232900872.png)

![image-20210113232932050](assets/image-20210113232932050.png)

### 目标分析案例

#### 描述

×××连锁商店是一家刚刚发展起来的小型连锁商店，其前身是一家独立的小百货门面店。原商店只有销售的收银部分使用软件处理，其他业务都是手工作业，这已经不能适应它的业务发展要求。首先是随着商店规模的扩大，顾客量大幅增长，手工作业销售迟缓，顾客购物排队现象严重，导致流失客源。其次是商店的商品品种增多，无法准确掌握库存，商品积压、缺货和报废的现象上升明显。再次是商店面临的竞争比以前更大，希望在降低成本，吸引顾客，增强竞争力的同时，保持盈利水平。

#### 分析问题确定目标

![image-20210113232320983](assets/image-20210113232320983.png)

#### 高层目标模型

![image-20210113232328347](assets/image-20210113232328347.png)

#### 目标精化

![image-20210113232402867](assets/image-20210113232402867.png)

#### 目标冲突与协作

![image-20210113232438471](assets/image-20210113232438471.png)

#### 目标实现

##### 主体

![image-20210113232503176](assets/image-20210113232503176.png)

##### 操作

![image-20210113232517654](assets/image-20210113232517654.png)

### 业务过程分析

#### 活动图

+ 反映复杂的工作流
+ 核心思想是令牌平衡 Token balance!

![image-20210113233148491](assets/image-20210113233148491.png)

![image-20210113233158332](assets/image-20210113233158332.png)

![image-20210113233213113](assets/image-20210113233213113.png)

#### 令牌平衡

+ 令牌就是一个条件
+ 一个控制流传递一个令牌。

+ 一个对象流传递一个令牌。

+ 决策节点从流入流接收到一个令牌后传递给多个流出流中的一个。

+ 合并节点从多个流入流中只要接收到一个令牌就传递给流出流。
+ 分叉节点从流入流接收一个令牌后，复制出多份令牌，给每个流出流都传递一个令牌
+ 汇合节点从每个流入流都接收一个令牌，或者流入流的令牌接收情况符合汇合规格，就向流出流传递一个令牌。
+ n令牌不平衡意味着业务工作缺陷：丢失—有工作被忽视；缺少—有并发活动开始没有被认识到；多余—有并发活动结束没有被认识到

![image-20210113233835839](assets/image-20210113233835839.png)

#### 活动图泳道（分区）

+  简单活动图虽然明确地说明了整个控制流的过程，但是却没有说明每个活动是由谁做的。对应到编程而言，就是没有明确地表示出每个活动是由什么类来负责的；对应到业务建模，就是没有明确地表示出机构中的哪一个部门负责实施什么操作。
+ 为了在简单活动图的基础上，有效地表示各个活动由谁负责的信息，可以通过泳道（SwimLane）来实现。

![image-20210113234008648](assets/image-20210113234008648.png)

#### 活动图案例

![image-20210113234130462](assets/image-20210113234130462.png)

##### 行为识别

![image-20210113234139453](assets/image-20210113234139453.png)

![image-20210113234146846](assets/image-20210113234146846.png)

##### 对象流

![image-20210113234153745](assets/image-20210113234153745.png)

##### 协同点

![image-20210113234201274](assets/image-20210113234201274.png)

##### 细化点

![image-20210113234208264](assets/image-20210113234208264.png)

##### 活动图

![image-20210113234220097](assets/image-20210113234220097.png)

### 定义系统边界

+ 问题分析与系统边界定义
  + 每个问题的解决方案边界的合并

+ 目标分析与系统边界定义
  + 边界目标：存在系统与环境的互动。
  + 边界目标所覆盖的场景和操纵的操作 、关注的数据对象：建立系统边界定义。

+ 业务过程分析与系统边界定义
  + 依据其动作和对象流完善边界定义

#### 用例图

![image-20210113234323289](assets/image-20210113234323289.png)

#### 上下文图

![image-20210113234329692](assets/image-20210113234329692.png)

## 涉众分析

### 涉众定义

+ 所有能够影响软件系统的实现

+ 或者会被实现后的软件系统所影响的

+ 关键个人和团体（stakeholder）。
+ 涉众分析围绕一个组织的各个部门内的员工所负责的业务展开
  + 所有的描述和胜败条件都和业务直接相关
+ 此类涉众分析的难度随着组织机构的复杂性和不确定性增长而增加

### 过程

![image-20210113235013813](assets/image-20210113235013813.png)

### 涉众识别

#### 基本原则

+ 涉众类别需要细分，发现所有类别
  + 每一类涉众的所有成员都能够一致、稳定的从相同立场、相同视角来看待相同的软件系统 

+ 发现比较关键的涉众
  + 需要分析他们各自的赢利条件，以在相互妥协中尽力实现一个共赢的结局 

+ 涉众群体不是固定不变的，需要持续维护
  + 对涉众的理解不是一个完成之后就可以结束的活动，而是应该在完成之后继续保持适当的关注

#### 识别方法

+ 简单方法：先膨胀后收缩(Expand -> Shrink)
+ 经验方法：检查列表（Checklist）
+ 经典方法：涉众网络 

#### 先膨胀后收缩

+ 膨胀。在该阶段，需求工程师在收集到背景资料后，凭借自己的经验，尽可能多地列出涉众类别，越多越好。

+ 收缩。在该阶段，需求工程师判断是否有两类或多类涉众的立场是一样的，将一样的多个类别进行合并。
+ 简单易用。如果涉众群体比较复杂，可能会出现遗漏。

#### 检查列表

+ 根据实践总结的常用涉众列表

![image-20210113235652144](assets/image-20210113235652144.png)

#### 涉众网络

1. 从一些比较容易发现的涉众出发，通常包括客户、管理者和相关的投资者
2. 由初始涉众集体讨论，列出一个涉众类别列表
3. 对上一步产生的涉众类别列表进行分析 ，缩减为一个关键涉众类别列表 
4. 由上一步的各个关键涉众类别选择代表，集中讨论，列出新的涉众类别列表 
   + 如果涉众类别列表趋于稳定，就结束涉众识别过程 ，否则转向第2步

### 涉众描述

#### 说明

+ 简单特征
  + 个人特征：年龄、性别、技能、身体状况...
  + 工作特征：任务
  + 地理和社会特征：国家、文化背景、社会关系
+ 对项目的关注点和兴趣所在，态度是反对还是赞同；
+ 对项目的期望，成为项目赢家的条件；
+ 可能受到的项目的影响，影响的具体内容及影响程度；
+ 可以对项目施加的影响，力量的施加点及其强度。

#### 示例

![image-20210114000012043](assets/image-20210114000012043.png)

### 涉众评估

#### 优先级评估

+ 涉众并不是完全平等的，有些涉众比其他涉众更为重要 
+ 优先考虑涉众的基本特征，尤其是任务特征 

![image-20210114000300923](assets/image-20210114000300923.png)

#### 风险评估

+ 基于涉众特征与态度化解涉众风险策略
+ power-interest和power-attitude模型

![image-20210114000349693](assets/image-20210114000349693.png)

##### 案例

+ 风险：“老二次元”用户群体的保守

+ 化解：围绕内容与内容的UGC，实现“老二次元”出圈与一般用户的进入；共青团的入驻；品牌形象的打造

#### 共赢分析

+ Stakeholder/Issue关系图

+ 如果某个Stakeholder-Issue关系上所寄予的期望与项目的业务需求无法保持一致，那么它关联的涉众就在该Issue的问题上和项目整体目标存在冲突 

  + 涉众和项目负责人互相调整、折中 

  + 重新评估项目的可行性 

![image-20210114000622384](assets/image-20210114000622384.png)

##### 案例

![image-20210114000907540](assets/image-20210114000907540.png)

### 涉众代表选择

+ 完整采样: 每种涉众类别都有自己的代表

+ 态度积极: 愿意提供帮助

+ 数量适中
  + 太少 : 个人看法倾轧群体共同看法 
  + 太多: 达成一致困难 
  + 代表数量的准确数字要视项目的上下文环境来确定, 一般6-10

+ 比例恰当
  + 计算机技能
  + 业务技能

+ 用户源替代：**因为业务关系而和用户频繁接触的人** ，能够代替他们发表看法 

### 参与策略制定

+ 让代表们在合适的时间参与合适的工作 

#### 参与矩阵

![image-20210114001257796](assets/image-20210114001257796.png)

#### 用户参与

+ 建立和用户的直接联系
+ 用户参与软件系统开发的整个过程
+ 反馈设计：最终的软件系统是和用户的活动行为密切相关的

![image-20210114001458619](assets/image-20210114001458619.png)

### 目标模型

#### 主体依赖模型

+ 分析涉众互动，识别关键涉众类别

+ 目标依赖（goal dependency）：依赖者希望被依赖者满足一个条件，但不会规定怎样满足该条件。

+ 软目标依赖（soft goal dependency）：一种特殊类型的目标依赖，其条件是无法量化描述的。

+ 任务依赖（task dependency）：依赖者希望被依赖者执行特定任务。任务依赖比目标依赖更加具体，因为满足条件可以执行很多任务，被依赖者有自己的选择权。而任务依赖直接为被依赖者规定了任务。

+ 资源依赖（resource dependency）：依赖者希望被依赖者提供资源实体（抽象信息或者实物材料）为自己所用，但不关注提供资源需要被依赖者执行的行为和解决的问题。

![image-20210114002456512](assets/image-20210114002456512.png)

#### 评估涉众

+ 拥有者的目标模型
+ 将目标模型的Goal分配到Actor
+ 根据Goal的优先级安排Actor的优先级
+ 根据Goal的风险确定Actor的风险
+ 根据目标分析深入分析Actor间的互动
  + 发现Actor之间的冲突
  + 根据Goal的冲突情况协商解决Actor间冲突

![image-20210114002307183](assets/image-20210114002307183.png)